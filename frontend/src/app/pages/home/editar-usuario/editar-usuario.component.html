<app-navbar></app-navbar>

<main class="editar-usuario">
  <h2><span class="highlight-bar"></span> Edite seu Usuário</h2>

  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="form-cadastro">
    <!-- Nome -->
    <div class="form-group">
      <label for="nome">Nome Completo</label>
      <input
        id="nome"
        type="text"
        maxlength="60"
        formControlName="nome"
        placeholder="Digite o nome completo"
        [ngClass]="{
          'is-valid': f['nome'].valid && f['nome'].touched,
          'is-invalid': f['nome'].invalid && f['nome'].touched
        }"
      />
      <div class="feedback" *ngIf="f['nome'].touched && f['nome'].invalid">
        <small *ngIf="f['nome'].errors?.['required']">O nome é obrigatório.</small>
        <small *ngIf="f['nome'].errors?.['maxlength']">Máximo de 60 caracteres.</small>
      </div>
    </div>

    <!-- Tipo -->
    <div class="form-group">
      <label for="tipo">Tipo de Usuário</label>
      <select
        id="tipo"
        formControlName="tipo"
        [ngClass]="{
          'is-valid': f['tipo'].valid && f['tipo'].touched,
          'is-invalid': f['tipo'].invalid && f['tipo'].touched
        }"
      >
        <option value="Personal">Personal</option>
        <option value="Comum">Comum</option>
      </select>
      <div class="feedback" *ngIf="f['tipo'].touched && f['tipo'].invalid">
        <small>Selecione o tipo de usuário.</small>
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">E-mail</label>
      <input
        id="email"
        type="email"
        maxlength="50"
        formControlName="email"
        placeholder="exemplo@email.com"
        [ngClass]="{
          'is-valid': f['email'].valid && f['email'].touched,
          'is-invalid': f['email'].invalid && f['email'].touched || emailDuplicado
        }"
      />
      <div class="feedback" *ngIf="f['email'].touched && f['email'].invalid || emailDuplicado">
        <small *ngIf="f['email'].errors?.['required']">Obrigatório.</small>
        <small *ngIf="f['email'].errors?.['email']">Formato inválido.</small>
        <small *ngIf="emailDuplicado">Este e-mail já está em uso por outro usuário.</small>
      </div>
    </div>

    <!-- Senha -->
    <div class="form-group">
      <label for="senha">Senha</label>
      <input
        id="senha"
        type="password"
        maxlength="40"
        formControlName="senha"
        placeholder="Digite uma senha"
        [ngClass]="{
          'is-valid': f['senha'].valid && f['senha'].touched,
          'is-invalid': f['senha'].invalid && f['senha'].touched
        }"
      />
      <div class="feedback" *ngIf="f['senha'].touched && f['senha'].invalid">
        <small *ngIf="f['senha'].errors?.['required']">Obrigatória.</small>
        <small *ngIf="f['senha'].errors?.['minlength']">Mínimo de 6 caracteres.</small>
      </div>
    </div>
    <!-- Imagem -->
<div class="form-group">
  <label for="imagem">Imagem (.png ou .jpeg)</label>
  <input id="imagem" type="file" accept="image/png, image/jpeg" (change)="onFileSelected($event)" />
</div>


    <!-- Botões -->
    <div class="botoes">
      <button type="submit" class="btn-submit">
        <i class="fa-solid fa-floppy-disk"></i> Salvar alterações
      </button>
      <button type="reset" class="btn-cancelar">
        <i class="fa-solid fa-xmark"></i> Cancelar
      </button>
    </div>
  </form>
</main>

<app-footer></app-footer>